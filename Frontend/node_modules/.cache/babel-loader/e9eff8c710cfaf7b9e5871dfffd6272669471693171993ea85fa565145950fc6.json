{"ast":null,"code":"import _slicedToArray from\"E:/IOT_PROJECT-Dev_LgBao/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Home from\"./layout/home/Home\";import Profile from\"./layout/profile/Profile\";import Datasensor from\"./layout/data_sensor/DataSensor\";import History from\"./layout/action_history/Action\";import{Route,Routes,Navigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import Login from\"./layout/login/Login\";import{useJwt}from'react-jwt';import{setHeader}from\"./api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var token=localStorage.getItem(\"token\");var _useJwt=useJwt(token),isExpired=_useJwt.isExpired;var _useState=useState(!!token),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){if(token&&!isExpired){setUser(true);setHeader(token);}else{setUser(false);}},[isExpired,token]);return/*#__PURE__*/_jsx(Routes,{children:!user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:'/login',replace:true})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{exact:true,index:true,element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"action-history\",element:/*#__PURE__*/_jsx(History,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:'/'}),replace:true})]})});}export default App;","map":{"version":3,"names":["Home","Profile","Datasensor","History","Route","Routes","Navigate","useEffect","useState","Login","useJwt","setHeader","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","token","localStorage","getItem","_useJwt","isExpired","_useState","_useState2","_slicedToArray","user","setUser","children","path","element","to","replace","exact","index"],"sources":["E:/IOT_PROJECT-Dev_LgBao/Frontend/src/App.js"],"sourcesContent":["import Home from \"./layout/home/Home\";\nimport Profile from \"./layout/profile/Profile\";\nimport Datasensor from \"./layout/data_sensor/DataSensor\";\nimport History from \"./layout/action_history/Action\";\nimport { Route, Routes, Navigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport Login from \"./layout/login/Login\";\nimport { useJwt } from 'react-jwt'\nimport { setHeader } from \"./api\";\n\nfunction App() {\n  const token = localStorage.getItem(\"token\")\n  const { isExpired } = useJwt(token)\n  const [user, setUser] = useState(!!token)\n\n  useEffect(() => {\n    if (token && !isExpired) {\n      setUser(true)\n      setHeader(token)\n    } else {\n      setUser(false)\n    }\n  }, [isExpired, token]);\n\n  return (\n    <Routes>\n      {!user ? <>\n        <Route path='/login' element={<Login setUser={setUser} />} />\n        <Route path='*' element={<Navigate to={'/login'} replace />}/>\n      </> : <> \n        <Route exact index element={<Home/>} ></Route>\n        <Route path = \"profile\" element = {<Profile/>}></Route>\n        <Route path = \"action-history\" element = {<History/>}></Route>\n        <Route path='*' element={<Navigate to={'/'} />} replace/>\n      </>}\n    </Routes>\n  );\n}\n\nexport default App;\n"],"mappings":"uHAAA,MAAO,CAAAA,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,OAAO,KAAM,0BAA0B,CAC9C,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CACxD,MAAO,CAAAC,OAAO,KAAM,gCAAgC,CACpD,OAASC,KAAK,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,sBAAsB,CACxC,OAASC,MAAM,KAAQ,WAAW,CAClC,OAASC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,GAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,IAAAC,OAAA,CAAsBZ,MAAM,CAACS,KAAK,CAAC,CAA3BI,SAAS,CAAAD,OAAA,CAATC,SAAS,CACjB,IAAAC,SAAA,CAAwBhB,QAAQ,CAAC,CAAC,CAACW,KAAK,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAlCG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAEpBlB,SAAS,CAAC,UAAM,CACd,GAAIY,KAAK,EAAI,CAACI,SAAS,CAAE,CACvBK,OAAO,CAAC,IAAI,CAAC,CACbjB,SAAS,CAACQ,KAAK,CAAC,CAClB,CAAC,IAAM,CACLS,OAAO,CAAC,KAAK,CAAC,CAChB,CACF,CAAC,CAAE,CAACL,SAAS,CAAEJ,KAAK,CAAC,CAAC,CAEtB,mBACEN,IAAA,CAACR,MAAM,EAAAwB,QAAA,CACJ,CAACF,IAAI,cAAGV,KAAA,CAAAF,SAAA,EAAAc,QAAA,eACPhB,IAAA,CAACT,KAAK,EAAC0B,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAElB,IAAA,CAACJ,KAAK,EAACmB,OAAO,CAAEA,OAAQ,CAAE,CAAE,CAAE,CAAC,cAC7Df,IAAA,CAACT,KAAK,EAAC0B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAElB,IAAA,CAACP,QAAQ,EAAC0B,EAAE,CAAE,QAAS,CAACC,OAAO,MAAE,CAAE,CAAC,CAAC,EAC9D,CAAC,cAAGhB,KAAA,CAAAF,SAAA,EAAAc,QAAA,eACJhB,IAAA,CAACT,KAAK,EAAC8B,KAAK,MAACC,KAAK,MAACJ,OAAO,cAAElB,IAAA,CAACb,IAAI,GAAC,CAAE,CAAS,CAAC,cAC9Ca,IAAA,CAACT,KAAK,EAAC0B,IAAI,CAAG,SAAS,CAACC,OAAO,cAAIlB,IAAA,CAACZ,OAAO,GAAC,CAAE,CAAQ,CAAC,cACvDY,IAAA,CAACT,KAAK,EAAC0B,IAAI,CAAG,gBAAgB,CAACC,OAAO,cAAIlB,IAAA,CAACV,OAAO,GAAC,CAAE,CAAQ,CAAC,cAC9DU,IAAA,CAACT,KAAK,EAAC0B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAElB,IAAA,CAACP,QAAQ,EAAC0B,EAAE,CAAE,GAAI,CAAE,CAAE,CAACC,OAAO,MAAC,CAAC,EACzD,CAAC,CACG,CAAC,CAEb,CAEA,cAAe,CAAAf,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}