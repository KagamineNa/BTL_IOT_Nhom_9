{"ast":null,"code":"/**\n * @internal\n */\nexport function augmentWebsocket(webSocket, debug) {\n  webSocket.terminate = function () {\n    var noOp = function noOp() {};\n    // set all callbacks to no op\n    this.onerror = noOp;\n    this.onmessage = noOp;\n    this.onopen = noOp;\n    var ts = new Date();\n    var origOnClose = this.onclose;\n    // Track delay in actual closure of the socket\n    this.onclose = function (closeEvent) {\n      var delay = new Date().getTime() - ts.getTime();\n      debug(\"Discarded socket closed after \".concat(delay, \"ms, with code/reason: \").concat(closeEvent.code, \"/\").concat(closeEvent.reason));\n    };\n    this.close();\n    origOnClose.call(this, {\n      code: 4001,\n      reason: 'Heartbeat failure, discarding the socket',\n      wasClean: false\n    });\n  };\n}","map":{"version":3,"names":["augmentWebsocket","webSocket","debug","terminate","noOp","onerror","onmessage","onopen","ts","Date","origOnClose","onclose","closeEvent","delay","getTime","concat","code","reason","close","call","wasClean"],"sources":["E:\\IOT_PROJECT-Dev_LgBao\\Frontend\\node_modules\\react-stomp-hooks\\node_modules\\@stomp\\stompjs\\src\\augment-websocket.ts"],"sourcesContent":["import { IStompSocket } from './types';\n\n/**\n * @internal\n */\nexport function augmentWebsocket(\n  webSocket: IStompSocket,\n  debug: (msg: string) => void\n) {\n  webSocket.terminate = function () {\n    const noOp = () => {};\n\n    // set all callbacks to no op\n    this.onerror = noOp;\n    this.onmessage = noOp;\n    this.onopen = noOp;\n\n    const ts = new Date();\n\n    const origOnClose = this.onclose;\n\n    // Track delay in actual closure of the socket\n    this.onclose = closeEvent => {\n      const delay = new Date().getTime() - ts.getTime();\n      debug(\n        `Discarded socket closed after ${delay}ms, with code/reason: ${closeEvent.code}/${closeEvent.reason}`\n      );\n    };\n\n    this.close();\n\n    origOnClose.call(this, {\n      code: 4001,\n      reason: 'Heartbeat failure, discarding the socket',\n      wasClean: false,\n    });\n  };\n}\n"],"mappings":"AAEA;;;AAGA,OAAM,SAAUA,gBAAgBA,CAC9BC,SAAuB,EACvBC,KAA4B;EAE5BD,SAAS,CAACE,SAAS,GAAG;IACpB,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAQ,CAAE,CAAC;IAErB;IACA,IAAI,CAACC,OAAO,GAAGD,IAAI;IACnB,IAAI,CAACE,SAAS,GAAGF,IAAI;IACrB,IAAI,CAACG,MAAM,GAAGH,IAAI;IAElB,IAAMI,EAAE,GAAG,IAAIC,IAAI,EAAE;IAErB,IAAMC,WAAW,GAAG,IAAI,CAACC,OAAO;IAEhC;IACA,IAAI,CAACA,OAAO,GAAG,UAAAC,UAAU,EAAG;MAC1B,IAAMC,KAAK,GAAG,IAAIJ,IAAI,EAAE,CAACK,OAAO,EAAE,GAAGN,EAAE,CAACM,OAAO,EAAE;MACjDZ,KAAK,kCAAAa,MAAA,CAC8BF,KAAK,4BAAAE,MAAA,CAAyBH,UAAU,CAACI,IAAI,OAAAD,MAAA,CAAIH,UAAU,CAACK,MAAM,CAAE,CACtG;IACH,CAAC;IAED,IAAI,CAACC,KAAK,EAAE;IAEZR,WAAW,CAACS,IAAI,CAAC,IAAI,EAAE;MACrBH,IAAI,EAAE,IAAI;MACVC,MAAM,EAAE,0CAA0C;MAClDG,QAAQ,EAAE;KACX,CAAC;EACJ,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}